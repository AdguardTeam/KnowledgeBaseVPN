---
title: 'AdGuard VPN 协议的工作原理'
sidebar_position: 4
---

我们的协议在[所有 AdGuard VPN 移动和桌面应用程序上](https://adguard-vpn.com/zh_cn/welcome.html)使用。 下载我们的任何产品，并在知道你的数据以最安全的方式得到保护的情况下使用它。

## 为什么我们开发 AdGuard VPN 协议

多年来，我们一直专注于开发各种类型的广告拦截应用程序和浏览器扩展。 而在 2019 年，我们决心开发自己的 VPN 服务，似乎是突发奇想。 而实际上，有几个原因促使我们这样做。

* AdGuard 移动应用程序与 VPN 应用程序有兼容性问题。 通常情况下，两个基于 VPN 的移动应用程序不能一起工作：在 iOS 上的情况很少，而在 Android 上从来没有。 由于 AdGuard 广告拦截器应用程序使用本地 VPN 来过滤网络流量，因此这也导致其无法与任何 VPN 应用程序合作。 这就是为什么我们认为开发内部 VPN 是唯一可行的解决方案，可以保证兼容性：在我们运用一些魔法后，两个应用程序能够作为一个 VPN 服务一起工作。
* 其次，VPN 似乎与我们的理念更加相关。 我们的首要目标是保护用户的隐私，而这正是 VPN 的作用所在。
* 最后，在多年开发 AdGuard 软件的过程中，我们已经成为了过滤网络流量的专家。 这使我们能够带来一款全新的 VPN，而不是另一款毫无特殊性的传统 VPN。

从一开始，我们就决定将开发和部署一个内部 VPN 协议，使 AdGuard VPN 与竞争对手有一个关键区别，不强迫用户在安全和速度之间做出选择。

## 流行 VPN 协议的缺点

我们开发的 AdGuard VPN 协议时看到了流行的 VPN 协议（OpenVPN、WireGuard、IPSec 等）的一些技术性缺陷。

* 这些缺陷导致它们容易在网络层面上被检测到并阻止。
* 而如果你试图"隐藏"它们，性能就会下降。

为了"掩盖" VPN 的使用，数据流通常被"包裹"在一个 TCP 连接中，有时还被额外加密，使流量看起来像一个正常的网站连接。 不幸的是，这种方法有一个缺点，由于使用 TCP，需要额外的时间以确认交付。

因此，使用任何流行的 VPN 协议，我们总是面临着一个权衡：快速但易于检测，隐秘但缓慢。

## AdGuard VPN 协议的优点

* 它*几乎不可能与正常的 HTTPS 流量区分开来*，也就是说，与 AdGuard VPN 服务器的连接看起来与与正常网站的连接完全一样。
* 对于加密，我们使用 **HTTPS（TLS）**，它可以完美地应对这一任务。 它是世界上最流行的加密方法，实施它的库不断受到安全审计。

一些现有的 VPN 协议也处理加密任务，而且它们（以及因此而使用 VPN 的事实）很难被发现。 但这通常是以降低速度为代价的。 AdGuard 则没有这个问题，这要归功于几个解决方案。

* 我们使用 **HTTP/2 传输协议**，这使得在保持高速的同时几乎不可能检测到 AdGuard VPN 协议。
* 与其他协议不同，AdGuard VPN 协议*使用数据而非数据包操作*。 这意味着 AdGuard VPN 为每个连接建立一个单独的"隧道"，每个 HTTP/2 流对应一个连接。 AdGuard VPN 通过该隧道传输数据。 这使我们能够通过节省确认数据包来加快操作，因为我们可以在向 VPN 服务器（或从服务器到客户端）发送数据之前将几个数据包缓冲成一个。 而且数据包越少，需要的确认就越少。